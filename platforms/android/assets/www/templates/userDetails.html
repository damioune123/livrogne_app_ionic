<ion-view view-title="Détails Utilisateur" cache-view="false">

    <ion-content  ng-class="{expanded:$scope.isExpanded}">
        <ion-refresher on-refresh="doRefresh()"
                       pulling-text="Tirez pour rafraichir.."
                       refreshing-text="Chargement!"
                       refreshing-icon="ion-loading-c">
        </ion-refresher>
        <h4 class="border-top"><i class="icon ion-navicon-round"></i> Détails de l'utilisateur {{user.firstname}} {{user.lastname}}</h4>
        <div class="list">
            <button class="button button-clear button-assertive " ng-show='user.godfather.id==currentUserId' ng-click="unsetGodfather(user.id)">Ne plus parrainer</button>
            <ionic-numberpicker  input-obj="numberPickerObject">
                <button ng-show='user.godfather.id==currentUserId' class="button button-clear button-positive "> Changer limite crédit</button>
            </ionic-numberpicker>
            <div class="item item-divider">
                Informations générales
            </div>
            <a class="item">
                Nom d'utilisateur:  {{user.username}}
            </a>
            <a ng-show="user.role=='ROLE_USER'" class="item">
                Utilisateur
            </a>
            <a ng-show="user.role=='ROLE_ADMIN'" class="item">
                Administrateur
            </a>
            <a ng-show="user.godfather!=undefined" class="item">
                Parrain:  {{user.godfather.firstname}} {{user.godfather.lastname}}
            </a>
            <a class="item">
                Solde:  {{user.user_accounts[0].money_balance}}€
            </a>
            <a class="item">
                Limite de crédit autorisée :  {{user.user_accounts[0].money_limit}}€
            </a>

            <a class="item">
                Solde disponible :  {{user.user_accounts[0].available_balance}}€
            </a>
            <a class="item">
                Promotion globale actuelle :  {{user.promotion.user_promotion}}%
            </a>

        </div>
    </ion-content>
</ion-view>
